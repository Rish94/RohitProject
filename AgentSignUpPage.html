<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="cargent">
        <!-- car rentel agency rgistration page -->
        <div id="carrental">
            <h1>Car Rental Agency Registration</h1>
            <form action="carrental.php" method="post">
                <label for="name">Name</label>
                <input type="text" name="name" id="name" placeholder="Enter your name" required>
                <label for="email">Email</label>
                <input type="email" name="email" id="email" placeholder="Enter your email" required>
                <label for="phone">Phone</label>
                <input type="tel" name="phone" id="phone" placeholder="Enter your phone number" required>
                <label for="address">Address</label>
                <input type="text" name="address" id="address" placeholder="Enter your address" required>
                <label for="city">City</label>
                <input type="text" name="city" id="city" placeholder="Enter your city" required>
                <label for="state">State</label>
                <input type="text" name="state" id="state" placeholder="Enter your state" required>
                <label for="zip">Zip</label>
                <input type="text" name="zip" id="zip" placeholder="Enter your zip" required>
                <label for="country">Country</label>
                <input type="text" name="country" id="country" placeholder="Enter your country" required>
                <label for="password">Password</label>
                <input type="password" name="password" id="password" placeholder="Enter your password" required>
                <label for="cpassword">Confirm Password</label>
                <input type="password" name="cpassword" id="cpassword" placeholder="Confirm your password" required>
                <input type="submit" value="Register">
            </form>
    </div>
    <!-- css -->
    <style>
        #carrental{
            width: 50%;
            margin: auto;
            padding: 20px;
            border: 1px solid black;
            border-radius: 10px;
        }
        #carrental input{
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid black;
            border-radius: 5px;
        }
        #carrental input[type="submit"]{
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid black;
            border-radius: 5px;
            background-color: #4CAF50;
            color: white;
        }
    </style>
    <!-- script -->
    <script>
        // car rental agency registration page
        // get the form
        const carrental = document.getElementById('carrental');
        // get the form elements
        const name = document.getElementById('name');
        const email = document.getElementById('email');
        const phone = document.getElementById('phone');
        const address = document.getElementById('address');
        const city = document.getElementById('city');
        const state = document.getElementById('state');
        const zip = document.getElementById('zip');
        const country = document.getElementById('country');
        const password = document.getElementById('password');
        const cpassword = document.getElementById('cpassword');
        // add event listener
        carrental.addEventListener('submit', (e) => {
            // prevent the default action
            e.preventDefault();
            // check if the password and confirm password are the same
            if(password.value !== cpassword.value){
                alert('Password and confirm password are not the same');
            }else{
                // create a new form data
                const formData = new FormData();
                // append the form data
                formData.append('name', name.value);
                formData.append('email', email.value);
                formData.append('phone', phone.value);
                formData.append('address', address.value);
                formData.append('city', city.value);
                formData.append('state', state.value);
                formData.append('zip', zip.value);
                formData.append('country', country.value);
                formData.append('password', password.value);
                // create a new ajax request
                const xhr = new XMLHttpRequest();
                // open the request
                xhr.open('POST', 'carrental.php', true);
                // send the request
                xhr.send(formData);
                // on load
                xhr.onload = () => {
                    // check if the request is successful
                    if(xhr.status === 200){
                        // check if the request is successful
                        if(xhr.responseText === 'success'){
                            alert('Registration successful');
                            // redirect to the login page
                            window.location.href = 'carrentallogin.php';
                        }else{
                            alert('Registration failed');
                        }
                    }else{
                        alert('Registration failed');
                    }
                }
            }
        });
    </script>

</body>
</html>